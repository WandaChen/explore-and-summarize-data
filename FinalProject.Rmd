<h1> Earthquake Analysis For Magnitude 7 And Higher Since 1900  </h1> 
<h4> by Wanda Chen </h4>
=====================================================================

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}

# Load all of the packages that you end up using
# in your analysis in this code chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk.
# This prevents the code from displaying in the knitted HTML output.
# You should set echo=FALSE for all code chunks in your file.

### make sure in the correct working directory
### getwd()
### setwd('C:/Udacity/Data Analysis/Project 3/Final Project')

#install.packages("ggplot2", dependencies = T) 
#install.packages("knitr", dependencies = T)
#install.packages("dplyr", dependencies = T)
#install.packages("tidyr", dependencies = T)
#install.packages("reshape2", dependencies = T)
#install.packages("GGally", dependencies = T)
#install.packages("scales", dependencies = T)
#install.packages("memisc", dependencies = T)

library(ggplot2)
library(knitr)
require(plyr)
library(dplyr)
library(tidyr)
library(reshape2)
library(GGally)
library(scales)
library(memisc)
#library(maptools)
#library(maps)
library(gridExtra)
library(grid)
```

##Basic Information about the Data
```{r echo=FALSE, Load_the_Data}
# Load the Data
ef = read.csv("earthquake_7_1900.csv", sep=',')
#1318 obs of 15 variables

#list the header of dataframe
names(ef)

group <- ef$time
ef$New_Time <- gsub("T", " ", group)
ef$New_Time <- gsub("Z", "", ef$New_Time)

head(ef$New_Time)

ef$Date <- as.Date(ef$New_Time)

ef$Time <- format(as.POSIXct(ef$New_Time),format="%H:%M:%S")
head(ef$Time)
#[1] "19:11:20" "03:36:16" "05:46:24" "00:58:53" "16:58:30" "06:34:11"

ef$Year = as.numeric(format(ef$Date, format = "%Y"), data=ef$Date)
ef$Month = as.numeric(format(ef$Date, format = "%m"), data=ef$Date)
ef$Day = as.numeric(format(ef$Date, format = "%d"), data=ef$Date)
ef$Hour = as.numeric(format(as.POSIXct(ef$New_Time),format="%H"))
head(ef$Hour)

#category depth 
summary(ef$depth)
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#    0.00   15.00   28.75   71.98   40.00  675.40 

cond <- ef$depth < 70 & ef$depth >= 1
ef$depth_class <- ifelse(cond, 'shallow','intermediate')
cond <- ef$depth >= 300
ef$depth_class <- ifelse(cond, 'deep', ef$depth_class)
cond <- ef$depth == 0
ef$depth_class <- ifelse(cond, 'surface', ef$depth_class)


table(ef$depth_class)
#        deep intermediate      shallow      surface 
#          91          126         1090           11 

#category magnitudes 
summary(ef$mag)
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   7.000   7.100   7.200   7.358   7.600   9.600 


ef$mag_class <- cut(ef$mag, 
             labels = c("class1", "class2", "class3", "class4", "class5", "class6"),
             breaks=seq(6.9, 10.0, by = 0.5))
table (ef$mag_class)


#category longitude and latitude

ef$long <- (ef$longitude) %% 360

cond2<- ef$long > 180.0
ef$long_class <- ifelse(cond2, 'WestH','EastH')
cond2<- ef$long == 180.0
ef$long_class <- ifelse(cond2, 'PrimeMeridian', ef$long_class)
cond3<- ef$latitude > 0.0
ef$lat_class <- ifelse(cond3, 'NorthH', 'SouthH')
cond3<- ef$latitude == 0.0
ef$lat_class <- ifelse(cond3, 'Equator', ef$lat_class)

# Determine the decade for each event
ef$decade <- cut(ef$Year, breaks=seq(1899, 2019, by = 10),
             labels = c("1900s", "1910s", "1920s", "1930s", "1940s", "1950s", "1960s", "1970s", "1980s", "1990", "2000s", "2010s"))
table (ef$decade)

names(ef)

str(ef)

Palette1 <- c('blue','dark green','red','brown','pink', 'orange', 'yellow')

```

# Univariate Plots Section 
```{r echo=FALSE, Univariate_Plots}
#histogram
#1. a) All data file (7.0 <= mag < 10)
ggplot(aes(x= mag), data=ef) +
  geom_histogram(aes(fill = ..count..), binwidth=.1) +
  scale_fill_gradient("Count", low = "green", high = "red") +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.2)) +
  ggtitle("Earthquake Magnitude 7 and Higher 1900-2015(April)")


# b) look at each month
ggplot(aes(x= mag), data=ef) +
  geom_histogram(aes(fill = ..count..), binwidth=.1) +
  scale_fill_gradient("Count", low = "green", high = "red") +
  scale_x_continuous(lim=c(7, 9.6), breaks=seq(7, 9.8, 0.4)) +
  facet_wrap(~Month, ncol=3) +
  ggtitle("Earthquake magnitude 7 and Higher for each month")

#2. a) 7.0 <= mag < 7.5
c1 <- subset(ef, mag_class=='class1', !is.na(mag))
ggplot(aes(x= mag), data=c1) +
  geom_histogram(aes(fill = ..count..),binwidth=.05) +
  scale_fill_gradient("Count", low = "green", high = "blue") +
  scale_x_continuous(breaks=seq(7.0, 7.5, 0.1)) +
  ggtitle("Earthquake magnitude < 7.5 1900-2015(April)")

# b) look at each month

ggplot(aes(x= mag), data=c1) +
  geom_histogram(aes(fill = ..count..), binwidth=.05) +
  scale_fill_gradient("Count", low = "green", high = "blue") +
  scale_x_continuous(breaks=seq(7.0, 7.5, 0.1)) +
  facet_wrap(~Month, ncol=3) +
  ggtitle("Earthquake magnitude < 7.5 for each month")

```

#### magnitude -- 7.5 <= mag < 8.0 
```{r echo=FALSE}
#3. a) 7.5 <= mag < 8.0
c2 <-subset(ef, mag_class=='class2')

ggplot(aes(x= mag), data=c2) +
  geom_histogram(aes(fill = ..count..),binwidth=.05) +
  scale_fill_gradient("Count", low = "blue", high = "red") +
  scale_x_continuous(breaks=seq(7.5, 8.0, 0.1)) +
  ggtitle("Earthquake magnitude < 8.0 and >= 7.5 Since 1900")

# b) look at each month
ggplot(aes(x= mag), data=c2) +
  geom_histogram(aes(fill = ..count..), binwidth=.05) +
  scale_fill_gradient("Count", low = "blue", high = "red") +
  scale_x_continuous(breaks=seq(7.5, 8.0, 0.1)) +
  facet_wrap(~Month, ncol=3) +
  ggtitle("Earthquake magnitude < 8 and >= 7.5 for each month")
```

#### magnitude -- 8.0 <= mag < 8.5
```{r echo=FALSE}
#4. 8.0 <= mag < 8.5
c3 <- subset(ef, mag_class== 'class3')

ggplot(aes(x= mag), data=c3) +
  geom_histogram(aes(fill = ..count..), binwidth=.03) +
  scale_fill_gradient("Count", low = "brown", high = "orange") +
  scale_x_continuous(breaks=seq(8.0, 8.5, 0.1)) +
  ggtitle("Earthquake magnitude < 8.5 and >= 8.0 1900-2015(April)")

# b) look at each month
ggplot(aes(x= mag), data=c3) +
  geom_histogram(aes(fill = ..count..), binwidth=.03) +
  scale_fill_gradient("Count", low = "brown", high = "orange") +
  scale_x_continuous(breaks=seq(7.9, 8.6, 0.1)) +
  facet_wrap(~Month, ncol=3) +
  ggtitle("Earthquake magnitude < 8.5 and >= 8.0 for each month")
```

#### magnitude > 8.5 
```{r echo=FALSE}
#5. mag < 8.5
c4 <- subset(ef, mag_class== 'class4' | mag_class == 'class5' | mag_class=='class6')

ggplot(aes(x= mag), data=c4) +
  geom_histogram(aes(fill = ..count..), binwidth=.04) +
  scale_fill_gradient("Count", low = "red", high = "blue") +
  scale_x_continuous(breaks=seq(8.5, 10.0, 0.1)) +
  ggtitle("Earthquake magnitude >= 8.5 1900-2015(April)")

# b) look at each month
ggplot(aes(x= mag), data=c4) +
  geom_histogram(aes(fill = ..count..), binwidth=.04) +
  scale_fill_gradient("Count", low = "red", high = "blue") +
  scale_x_continuous(breaks=seq(8.5, 9.7, 0.2)) +
  facet_wrap(~Month, ncol=3) +
  ggtitle("Earthquake magnitude >= 8.5 for each month")
```

#### Some information about the dataset
```{r echo=FALSE}
#Summary of earthquake magnitude, months, depth
summary(ef$mag)

summary(ef$Month)

summary(ef$depth)

#Detail information of earthquake magnitude and its frequency
table(ef$mag)

#Detail information of earthquake happened Month and its frequency
table(ef$Month)

table(ef$Hour)

#Information about amount of epicenter location
table(ef$long_class)

table(ef$lat_class)
```

#scatterplot to show where earthquakes happened
```{r echo=FALSE}
# original longitude
ggplot(aes(y = latitude, x=longitude), data=ef) +
  geom_point(aes(color=ef$depth_class)) +
  xlab('longitude (degree) - original given') +
  scale_x_continuous(breaks=seq(-180, 180, 30)) +
  ggtitle("Earthquake Magnitude 7 and above since 1900")

#Modify longitude
ggplot(aes(y = latitude, x=long), data=ef) +
  geom_point(aes(color=ef$Hour, shape=ef$mag_class)) +
  xlab("longitude (degree) - modified") +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  theme(legend.position = "bottom") +
  ggtitle("Earthquake Location vs Hour since 1900")

#Look at the depth of earthquakes
ggplot(aes(y= latitude, x=long), data=ef) +
  geom_point(aes(color=ef$depth_class)) +
  xlab("longitude (degree)") +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  ggtitle("Earthquake Magnitude 7 and above (Depth View) since 1900")


#world_map <- map_data("world")
#ggplot()+geom_map(aes(map_id ="group"),map = world_map)

#ggplot(aes(y= latitude, x=longitude), data=ef) +
#  geom_map(aes(map_id ="group"),map = world_map, color=ef$mag)

# Histogram of the depth of epic center (km)
qplot(x=depth, data=ef,binwidth=1) +
  scale_x_continuous(breaks=seq(0, 700, 50)) +
  xlab('depth (km)') +
  ggtitle('Epicenter Depth count')

```

#### Other plots that look at relation of magnitude, depth, occurance frequency and variance of earthquakes.
```{r echo=FALSE}
#scatterplot between the magnitude and depth of epic center (km)
ggplot(aes(x= mag, y=depth), data=ef) +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.2)) +
  geom_point(aes(color=ef$mag)) +
  ylab("depth (km)") +
  ggtitle("Earthquakes Magnitude vs. Depth of Epicenter")

#freqency plot to see how different class throught out the years
qplot(x=Year, data=ef, geom='freqpoly', binwidth=10, color=mag_class) +
  scale_x_continuous(lim=c(1900, 2020), breaks=seq(1900, 2020, 10)) +
  ggtitle("Earthquake frequency for each magnitude class 1900-2015(April)")

#Boxplot to show how each depth class that related to its depth
qplot(geom='Boxplot', data=ef, x= depth_class, y=depth) +
  ylab("depth (km)") +
  ggtitle("Earthquake depth_class vs depth")

table(ef$decade)
# 1900s 1910s 1920s 1930s 1940s 1950s 1960s 1970s 1980s 1990s 2000s 2010s 
#   30    60   112   126   110   101   139   131   110   155   148    96

# Earthquake occurance for each decade
qplot(geom='Boxplot', data=ef, x=decade, y=mag) +
  ggtitle('Occurance of earthquake for each decade')

```

## Univariate Analysis

### What is the structure of your dataset?

#### This is the basic structure of the .csv file that I downloaded: 
##### time - Time when the event occurred. Times are reported in milliseconds since the epoch ( 1970-01-01T00:00:00.000Z), and do not include leap seconds. In certain output formats, the date is formatted for readability.
##### latitude - Decimal degrees latitude. Positive values for northern latitudes. Negative values for southern latitudes.
##### longitude - Decimal degrees longitude. Positive values for eastern longitudes. Negative values for western longitudes.
##### depth - depth of the event in the kilometers
##### mag - The magnitude for the event
##### magType - The method or algorithm used to calculate the preferred magnitude for the event. Includes "Md", "Ml", "Ms", "Mw", "Me", "Mi", "Mb", "MLg".
##### nst - The total number of Number of seismic stations which reported P- and S-arrival times for this earthquake.
##### gap - The largest azimuthal gap between azimuthally adjacent stations (in degrees). In general, the smaller this number, the more reliable is the calculated horizontal position of the earthquake.
##### dmin - Horizontal distance from the epicenter to the nearest station (in degrees). 1 degree is approximately 111.2 kilometers. In general, the smaller this number, the more reliable is the calculated depth of the earthquake.
##### rms - The root-mean-square (RMS) travel time residual, in sec, using all weights. This parameter provides a measure of the fit of the observed arrival times to the predicted arrival times for this location. Smaller numbers reflect a better fit of the data. The value is dependent on the accuracy of the velocity model used to compute the earthquake location, the quality weights assigned to the arrival time data, and the procedure used to locate the earthquake.
##### net - The ID of a data contributor. Identifies the network considered to be the preferred source of information for this event.  The value includes: ak, at, ci, hv, ld, mb, nc, nm, nn, pr, pt, se, us, uu, uw.
##### id - A (generally) two-character network identifier with a (generally) eight-character network-assigned code.
##### updated - Time when the event was most recently updated. 
##### place - Textual description of named geographic region near to the event.  This may be a city name, or a Flinn-Engdahl Region name.

####  The variables that were created from the dataset - 
##### Date - the date when the event happened 
##### Year - the year when the event happened (4 digits value; 1900 - 2015)
##### Month - the month when the event happened (1-2 digits value; 1-12)
##### Day - the day when the event happened (1-2 digits value; 1-31)
##### Hour - the hour when the event happened (1-2 digits value; 0-23)
##### depth_class - different zones for the depth of the epicenter:
######   depth = 0 -- character string - "surface"
######   0 < depth < 70 -- character string - "shallow"
######   70 <= depth <= 300 -- character string - "intermediate"
######   depth > 300 -- character string - "deep"
#####   The zones (except depth=0) is according to USGS defined 
##### long - it is the another way to express of longitude that shows center of graph is 180 instead of 0
##### mag_class - the class that shows the group for the magnitude:
######   class 1 - magnitude < 7.5
######   class 2 - 7.5 <= magnitude < 8.0
######   class 3 - 8.0 <= magnitude < 8.5
######   class 4 - 8.5 <= magnitude < 9.0
######   class 5 - magnitude >= 9.0
##### long_class - the class that shows the group for the longitude
######   WestH - longitude > 180.0
######   PrimeMeridian - longitude = 180.0
######   EastH - longitude < 180.0
##### lat_class - the class that shows the group for the latitude
######   NorthH - latitude > 90.0
######   Equator - latitude = 90.0
######   SouthH - latitude < 90.0
##### Decade - for each 10 years in the Year field, it will determine which decade the time is in.  It ranges from the 1900s all the way to the 2010s.

### What is/are the main feature(s) of interest in your dataset?

##### The recent Napel earthquake makes me think about the relationship between the magnitude and depth of the epicenter, and the location. I want to know more about how location, depth, and magnitude are correlated since there are quite a number of earthquakes that have happened recently that are shallow earthquakes, with a high magnitude.  
##### I am also interested in the month of the earthquake, and I want to know if the Sun, Moon, and the Earth, may have a relationship to earthquakes.

### What other features in the dataset do you think will help support your investigation into your feature(s) of interest?

##### magType field may help in my investigation.  Unfortunately, there is no fault line information; I think that fault line information will help even more than just the magType.

### Did you create any new variables from existing variables in the dataset?

##### Yes.  
##### The time field in the dataset includes date and time.  I am interested in the Year and Month fields, so I split the time field into Date, and Time.  The Date field is split into 3 fields - Year, Month, Day.  I only extracted the Hour from the Time field.
##### depth_class - a field that shows different depth class (surface, shallow intermediate, deep) according to its depth.  
##### mag_class - a field that shows different magnitude class (separated by range of 0.5 magnitude)
##### long_class - a field that describes the longitude on the earth (180 degree as divider).  West Hemisphere, East Hemisphere, Prime Meridan.
##### lat_class - similar to long_class, but it describes latitude (0 degree is the divider).  North Hemisphere, South Hemisphere, Equator.
##### decade - it shows the number of the decade for the year.

### Of the features you investigated, were there any unusual distributions? Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?

##### I adjusted the dateset to make sure the date is split off from the time field. The Date field splits to 3 fields - Year, Month, Day, so it can help me to analyze the data set.
##### From the data it is rare to have magnitude 9 or higher earthquakes.  
##### Also it is less likely to have large earthquakes that are magnitude 8.5 or higher and depth is more than 100 km.

-----------------------------------------------------

# Bivariate Plots Section
```{r echo=FALSE, Bivariate_Plots}

#look though location of epicenter from different point of view 
ggplot(aes(y= latitude, x=long), data=ef) +
  geom_point(aes(color=mag_class)) +
  xlab("longitude (degree)") +
  scale_colour_manual(values=Palette1) +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  scale_y_continuous(breaks=seq(-90, 90, 20)) +
  ggtitle("Earthquake Magnitude 7 and above since 1900")

ggplot(aes(y=latitude, x=long), data=ef) +
  geom_point(alpha=1/3, aes(color=mag_class)) +
  xlab("longitude (degree)") +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  scale_y_continuous(breaks=seq(-90, 90, 20)) +
  ggtitle("Earthquake Magnitude 7 and above since 1900")

ggplot(aes(y= latitude, x=long), data=ef) +
  geom_point(stat='identity', aes(color=depth_class)) +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  scale_y_continuous(lim=c(-70, 75), breaks=seq(-70, 75, 20)) +
  xlab("longitude (degree)") +
  ggtitle("Earthquake Magnitude 7 and above since 1900")

ggplot(aes(y=latitude, x=long), data=ef) +
  geom_point(alpha=1/3, aes(color=depth_class)) +
  xlab("longitude (degree)") +
  scale_x_continuous(breaks=seq(0, 360, 60)) +
  scale_y_continuous(breaks=seq(-90, 90, 30)) +
  facet_wrap(~depth_class) +
  ggtitle("Earthquake Magnitude 7 and above separate by depth class")

# scatterplot between the magnitude and depth of epoch center (km)
ggplot(aes(x= mag, y=depth), data=ef) +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.2)) +
  ylab("depth (km)") +
  geom_point(aes(color=ef$mag)) +
  ggtitle("Earthquakes Magnitude vs. Depth of Epicenter")

with(ef, cor.test(mag, depth))

# Magnitude vs Epi Center Depth < 70 km

ggplot(aes(x= mag, y=depth), data=subset(ef, depth_class=="shallow" | depth_class == "surface")) +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.2)) +
  ylab("depth (km)") +
  geom_point(alpha=1/3, ) +
  ggtitle("Earthquakes Magnitude vs. Depth (< 70km) of Epi Center")

with(subset(ef, depth_class=='shallow'|depth_class=='surface'), cor.test(mag, depth))

# Magnitude vs Epoch Center Depth between 70km and 300km
ggplot(aes(x= mag, y=depth), data=subset(ef, depth_class=="intermediate")) +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.2)) +
  ylab("depth (km)") +
  geom_point(alpha=1/2) +
  ggtitle("Earthquakes Magnitude vs. Depth (between 70km and 300km) of Epi Center")

with(subset(ef, depth_class="intermediate"), cor.test(mag, depth))
 
# Magnitude vs Epoch Center Depth >= 400 km
ggplot(aes(x= mag, y=depth), data=subset(ef, depth_class == "deep")) +
  scale_x_continuous(lim=c(7, 8.5), breaks=seq(7, 8.5, 0.2)) +
  ylab("depth (km)") +
  geom_point() +
  ggtitle("Earthquakes Magnitude vs. Depth (>= 300 km) of Epi Center")

with(subset(ef, depth_class == "deep"), cor.test(mag, depth))

```

#### Other possible variables summary

```{r echo=FALSE}
#magType vs magnitude

qplot(x= magType, y=mag, data=subset(ef, !is.na(magType))) +
  geom_boxplot() +
  ggtitle("Earthquake magnitude provider distribution")

#magType vs depth
qplot(x=magType, y=depth, data=subset(ef, !is.na(net))) +
  geom_boxplot() +
  ggtitle("Earthquake magnitude (depth) network distribution")

summary (ef$magType)

#net vs magnitude
qplot(x=net, y=mag, data=subset(ef, !is.na(net))) +
  geom_boxplot() +
  ggtitle("Earthquake magnitude network distribution")

#net vs depth
qplot(x=net, y=depth, data=subset(ef, !is.na(net))) +
  geom_boxplot() +
  ggtitle("Earthquake magnitude (depth) network distribution")

summary (ef$net)

by(ef$mag, ef$decade, summary)
by(ef$mag, ef$Hour, summary)
by(ef$mag, ef$Month, summary)
```

#### Investigate the data that is difference among the Richter magnitude scale
###### Richter magnitude scale was defined in 1935, and widely used after 1970.  The graphs here shows how the earthquake spread out: 1)before 1935; 2) Between 1935 and 1970; 3)After 1970 

```{r echo=FALSE}
#Before 1935
ggplot(aes(y = latitude, x=long), data=subset(ef, Year < 1935)) +
  geom_point(aes(color=mag_class)) +
  xlab("longitude (degree)") +
  theme(legend.position="right") +
  scale_colour_manual(values=Palette1) +
  scale_x_continuous(lim=c(0, 360), breaks=seq(0, 360, 30)) +
  scale_y_continuous(lim=c(-75, 75), breaks=seq(-75, 75, 15)) +
  ggtitle("Earthquake location that happened before 1935")

#Between 1935 and 1970
ggplot(aes(y = latitude, x=long), 
       data=subset(ef, Year >= 1935 & Year < 1970 )) +
  geom_point(aes(color=mag_class)) +
  xlab("longitude (degree)") +
  theme(legend.position="right") +
  scale_colour_manual(values=Palette1) +
  scale_x_continuous(lim=c(0, 360), breaks=seq(0, 360, 30)) +
  scale_y_continuous(lim=c(-75, 75), breaks=seq(-75, 75, 15)) +
  ggtitle("Earthquake location that happened between 1935 and 1970")

#After 1970
ggplot(aes(y = latitude, x=long), data=subset(ef, Year >= 1970)) +
  geom_point(aes(color=mag_class)) +
  xlab("longitude (degree)") +
  theme(legend.position="right") +
  scale_colour_manual(values=Palette1) +
  scale_x_continuous(lim=c(0, 360), breaks=seq(0, 360, 30)) +
  scale_y_continuous(lim=c(-75, 75), breaks=seq(-75, 75, 15)) +
  ggtitle("Earthquake location that happened after 1970")
```

### Epicenter analysis - look through different depth, magnitude, time 
```{r echo=FALSE}
ggplot(aes(x= mag, y=depth_class), data=ef) +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.2)) +
  geom_point(alpha = 1/3, color="brown") +
  ggtitle("Magnitude vs. Depth_class of Epicenter Distribution")

ggplot(aes(x= depth, y=mag_class), data=ef) +
  scale_x_continuous(lim=c(0, 700), breaks=seq(0, 700, 50)) +
  geom_point(alpha=1/3, color="gold") +
  ggtitle("Depth vs. mag_class of Epicenter Distribution")

ggplot(aes(x= Month, y=depth), data=ef) +
  scale_x_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  geom_point(aes(color=depth_class)) +
  ggtitle("Earthquakes Month vs. Depth_class of Epi Center")

ggplot(aes(x= Month, y=depth), data=ef) +
  scale_x_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  geom_point(aes(color=ef$mag), alpha=1/3) +
  ggtitle("Earthquakes Month vs. Depth of Epi Center")

ggplot(aes(x= Month, y=mag), data=ef) +
  scale_x_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  geom_point(aes(color=depth_class)) +
  ggtitle("Earthquakes Month vs. Magnitude of Epi Center")

ggplot(aes(x= Year, y=mag), data=ef) +
  scale_x_continuous(lim=c(1900, 2015), breaks=seq(1900, 2015, 10)) +
  geom_point(aes(color=depth_class)) +
  ggtitle("Earthquakes Year vs. Magnitude of Epicenter")

#Boxplot - mag_class vs Year
qplot(y=Year, x= mag_class, data=subset(ef, !is.na(Year)), 
              geom='Boxplot', binwidth=5) +
  scale_y_continuous(lim=c(1900, 2015), breaks=seq(1900, 2015, 10)) +
  ggtitle("Earthquake magnitude class vs Year")

by(ef$Year, ef$mag_class, summary)

#Boxplot mag_class vs Month
qplot(y=Month, x= mag_class, data=subset(ef, !is.na(Month)), 
              geom='Boxplot', binwidth=5) +
  scale_y_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  ggtitle("Earthquake magnitude class vs Month")

by(ef$Month, ef$mag_class, summary)

#Boxplot mag_class vs Hour 
qplot(y=Hour, x= mag_class, data=subset(ef, !is.na(Hour)), 
              geom='Boxplot') +
  scale_y_continuous(lim=c(0,23), breaks=seq(0,23,1)) +
  ggtitle("Earthquake magnitude class vs Hour")

by(ef$Hour, ef$mag_class, summary)


stat_sum_single <- function(fun, geom="point", ...) {
  stat_summary(fun.y=fun, colour="blue", geom=geom, size = 3, ...)
}

ggplot(aes(x=factor(Hour), y=mag), data=ef) +
  stat_sum_single(mean) +
  xlab("Hour") +
  ylab("magnitude") +
  coord_cartesian(ylim=c(7.20, 7.5)) +
  ggtitle("Earthquake magnitude mean for each hour 1900-2015(April)")

ggplot(aes(x=Month, y=mag), data=ef) +
  stat_sum_single(mean) +
  ylab("magnitude") +
  scale_x_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  coord_cartesian(ylim=c(7.20, 7.5)) +
  ggtitle("Earthquake magnitude mean for each month 1900-2015(April)")

ggplot(aes(x=decade, y=mag), data=ef) +
  stat_sum_single(mean) +
  coord_cartesian(ylim=c(7, 7.8)) +
  ylab("magnitude") +
  ggtitle("Earthquake magnitude mean for each decade 1900-2015(April)")

```

#### Magnitude and Depth Relationship
```{r echo=FALSE}
# magnitude and depth relationship @ 95%
ggplot(aes(x=mag, y=depth), data=ef) +
  geom_point(color="#c08397", alpha=1/2) +
  stat_smooth(method='lm') +
  scale_x_continuous(lim=c(7, quantile(ef$mag, 0.95))) +
  scale_y_continuous(lim=c(0, quantile(ef$depth, 0.95))) +
  xlab('magnitude') +
  ylab('depth (km)') +
  ggtitle("Magnitude vs Depth @ 95% Range")

# magnitude and depth relationship @ 99%
ggplot(aes(x=mag, y=depth), data=ef) +
  geom_point(color="#e35761", alpha=1/2) +
  stat_smooth(method='lm') +
  scale_x_continuous(lim=c(7, quantile(ef$mag, 0.99))) +
  scale_y_continuous(lim=c(0, quantile(ef$depth, 0.99))) +
  xlab('magnitude') +
  ylab('depth (km)') +
  ggtitle("Magnitude vs Depth @ 99% Range")
```

## Bivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. How did the feature(s) of interest vary with other features in the dataset?

##### From the graphs that I picked, it shows a strong relationship among magnitudes and the locations of the epicenter. A lot of major ones are located in the "Ring Of Fire" area, which is on either side of the Pacific Ocean.  
##### It also shows strong earthquakes located in Southeast Asia, and the China/India border. It shows similarly in the graph that USGS created that most of the earthquakes happen in the border of plate boundaries "http://earthquake.usgs.gov/earthquakes/world/seismicity_maps/world.pdf".  
##### I thought the magnitude and depth of the epicenter has some kind of correlation, but when I ran the test, all the values are really close to 0.  So, it shows there is no direct relation between the depth and magnitude. It might have some relation if the data set included casualty and financial lost of the earthquakes. However, with large earthquakes (magnitude >=8.5), the depth does have a small correlation with the magnitude; it usually happens with shallow or surface area compared with intermediate or deep earthquakes.

### Did you observe any interesting relationships between the other features (not the main feature(s) of interest)?

##### One of the things may be just coincidence: the earthquakes that happened in April are all shallow class so far; the earthquakes that happened in October were shallow and deep class; and the earthquakes that happened in December were shallow and intermediate. The rest of the months included all types of earthquakes.  Magnitudes that are 9 and above happened in March, May, and December.
##### One of the methods of algorithm used to calculate the preferred magnitude for the earthquakes is "mw" including a few of the largest earthquakes, which its net (data contributor) is "iscgem".
##### One of graphs that I found interesting is the earthquake magnitude class vs. the year it happened. The boxplot shows that the median of each mag_class is all around 1960's except for magnitude >= 9.0 (class5), and the result for the mean is also similar to the median.  The graph for Month vs mag_class also shows similar results.  Both mean and median for magnitude < 8.5 (class1, class2, class3) is around June and July; but for magnitude >= 8.5 (class4 and higher) the median is on April, and Mean is somewhere in May. With mag_class vs Hour, for class1 - class4, the mean is around Hour 11 - Hour 12.  For median it is also around Hour 11 - Hour 12 for class1 - class3, but the median for class4 is Hour 14, which is different than its mean. 

### What was the strongest relationship you found?

##### The strongest relationship I found is the location (latitude and longitude) vs magnitude of the earthquakes. It sits into the "Ring of Fire", which is from southeast of the Pacific Ocean toward north and all the way to the southwest of Pacific Ocean.  Also even though the Richter magnitude scale was defined around 1935, it did not become widely used until after 1970.  All the earthquakes through out the 3 different time still show the Ring of Fire has the most earthquakes than other area.


# Multivariate Plots Section

####More detail analysis on magnitude and depth of epicenter and its occurrance

```{r echo=FALSE, Multivariate_Plots}
#magnitude vs depth through depth class by month
ggplot(aes(x= mag, y=depth), data=ef) +
  scale_x_continuous(lim=c(7, 10), breaks=seq(7, 10, .3)) +
  geom_point(aes(color=depth_class)) +
  facet_wrap(~Month, ncol=2) +
  xlab('magnitude') +
  ylab('depth (km)') +
  ggtitle("Magnitude vs. Depth (depth_class view) of Epi Center for each Month")

#Year vs magnitude through depth_class
ggplot(aes(y= Year, x=mag), data=ef) +
  scale_y_continuous(lim=c(1900, 2015), breaks=seq(1900, 2015, 10)) +
  geom_point(aes(color=depth_class)) +
  facet_wrap(~depth_class) +
  ggtitle("Earthquakes Year vs. Magnitude of Epi Center")

#location of earthquake distribution
ggplot(aes(y= latitude, x=long), data=ef) +
  geom_point(aes(color=mag_class)) +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  scale_y_continuous(breaks=seq(-90, 90, 30)) +
  xlab("longitude (degree)") +
  scale_colour_manual(values=Palette1) +
  ggtitle("Earthquake Magnitude 7 and above location since 1900")

#location of earthquake distribution - depth point of view
ggplot(aes(y= latitude, x=long), data=ef) +
  geom_point(aes(color=depth_class)) +
  scale_x_continuous(breaks=seq(0, 360, 30)) +
  scale_y_continuous(breaks=seq(-90, 90, 30)) +
  xlab("longitude (degree)") +
  scale_colour_manual(values=Palette1) +
  ggtitle("Earthquake Magnitude 7 and above location (depth) since 1900")

```

#### How earthquakes spread throught out the years and months
```{r echo=FALSE}
# from the point of depth
ggplot(aes(x= Year, y=Month), data=ef) +
  geom_point(aes(color=depth_class)) +
  scale_x_continuous(lim=c(1900, 2015), breaks=seq(1900, 2015, 10)) +
  scale_y_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  scale_colour_manual(values=Palette1) +
  ggtitle("Earthquake Magnitude 7 and above (Depth_class) Distribution")

# from the point of magnitude 
ggplot(aes(x= Year, y=Month), data=ef) +
  geom_point(aes(color=mag_class)) +
  scale_x_continuous(lim=c(1900, 2015), breaks=seq(1900, 2015, 10)) +
  scale_y_continuous(lim=c(1, 12), breaks=seq(1, 12, 1)) +
  scale_colour_manual(values=Palette1) +
  ggtitle("Earthquake Magnitude 7 and above (Mag_class) Distribution")

```

#### Occurance of earthquake through different combination view of mag_class, depth_class, longitude, latitude, magnitude, and depth.

```{r echo=FALSE}
# how occurance of each mag_class and its depth are related
ggplot(aes(x=mag_class, y=depth), data=ef) +
  geom_point(aes(color=depth_class)) +
  scale_y_continuous(lim=c(0, 700), breaks=seq(0, 700, 100)) +
  ylab('depth (km)') +
  ggtitle("Magnitude class vs Depth")

# occurance of each earthquake are related to longitude and its magnitude are spread out - from depth point of view
ggplot(aes(x=long, y=mag), data=ef) +
  geom_point(aes(color=depth_class), alpha=1/2) +
  scale_x_continuous(lim=c(0, 360), breaks=seq(0, 360, 20)) +
  scale_y_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.5)) +
  xlab('Longitude (degree)') +
  scale_colour_manual(values=Palette1) +
  ggtitle('Magnitude vs Longitude Variation')

# occurance of each earthquake are related to longitude and its depth are spread out - from magnitude_class point of view
ggplot(aes(x=long, y=depth), data=ef) +
  geom_point(aes(color=mag_class), alpha=1/2) +
  scale_x_continuous(lim=c(0, 360), breaks=seq(0, 360, 20)) +
  scale_y_continuous(lim=c(0, 700), breaks=seq(0, 700, 100)) +
  xlab('Longitude (degree)') +
  scale_colour_manual(values=Palette1) +
  ggtitle('Depth vs Longitude Variation')

# occurance of each earthquake are related to latitude and its depth are spread out - from depth_class point of view
ggplot(aes(y=latitude, x=mag), data=ef) +
  geom_point(aes(color=depth_class), alpha=1/2) +
  scale_y_continuous(lim=c(-90, 90), breaks=seq(-90,90, 10)) +
  scale_x_continuous(lim=c(7,10), breaks=seq(7,10, 0.5)) +
  ggtitle('Magnitude vs Latitude Variation')

# occurance of each earthquake are related to latitude and its depth are spread out - from magnitude_class point of view
ggplot(aes(y=latitude, x=depth), data=ef) +
  geom_point(aes(color=mag_class), alpha=1/2) +
  scale_y_continuous(lim=c(-90, 90), breaks=seq(-90, 90, 10)) +
  scale_x_continuous(lim=c(0, 700), breaks=seq(0, 700, 100)) +
  ggtitle('Depth vs Latitude Variation')
```

#### Look at how longitude & latitude related to the magnitude and depth
```{r echo=FALSE}

ggplot(aes(x=long_class, y=latitude), data=ef) +
  geom_point(aes(color=mag_class)) +
  scale_colour_manual(values=Palette1) +
  scale_y_continuous(lim=c(-90,90), breaks=seq(-90,90,20)) +
  ggtitle('Longitude class vs Latitude (Magnitude)')

ggplot(aes(x=long_class, y=latitude), data=ef) +
  geom_point(aes(color=depth_class)) +
  scale_colour_manual(values=Palette1) +
  ggtitle('Longitude class vs Latitude (Depth)')

ggplot(aes(x=long, y=lat_class), data=ef) +
  geom_point(aes(color=mag_class)) +
  scale_colour_manual(values=Palette1) +
  ggtitle('Longitude vs Latitude class (Magnitude)')

ggplot(aes(x=long, y=lat_class), data=ef) +
  geom_point(aes(color=ef$depth_class)) +
  scale_colour_manual(values=Palette1) +
  ggtitle('Longitude vs Latitude class (Depth)')

```

#### Scatterplot Matrix Analysis for each hemisphere

```{r echo=FALSE}
#East Hemisphere
dE <- subset(ef, ef$long_class == 'EastH')
gE <- ggpairs(dE[, c(2, 25, 4:5, 19:20, 22)], 
              title="East Hemisphere Comparison",
              params =c(binwidth=0.1))
gE

#West Hemisphere
dW <- subset(ef, ef$long_class == 'WestH')
gW <- ggpairs(dW[, c(2, 25, 4:5, 19:20, 22)],
              title="West Hemisphere Comparison",
              params =c(binwidth=0.1))
gW

#North Hemisphere
dN <- subset(ef, ef$lat_class == 'NorthH')
gN <- ggpairs(dN[, c(2, 25, 4:5, 19:20, 22)], 
              title="North Hemisphere Comparison",
              params =c(binwidth=0.1))
gN

#South Hemisphere
dS <- subset(ef, ef$lat_class == 'SouthH')
gS <- ggpairs(dS[, c(2, 25, 4:5, 19:20, 22)], 
              title="South Hemisphere Comparison",
              params =c(binwidth=0.1))
gS
```

#### Mean/median analysis - Hour, Month, and Year/Decade

#####Investigate Hour with Magnitude Mean/Median
```{r echo=FALSE}
hour_group <- ef %>%
  group_by(Hour) %>%
  summarize(hours_mean = mean(mag),
            hours_median = median(mag),
            n = n()) %>%
  arrange(Hour)

ggplot(aes(x=Hour, y=hours_mean), data=hour_group) +
  geom_point(aes(color=hours_median)) +
  ggtitle("Hours vs Hour_mean and Hour_median for earthquake magnitude")

ggplot(aes(x=factor(Hour), y=mag), data=ef) +
  geom_boxplot(notch=FALSE) +
  xlab('Hour') +
  ylab('magnitude') +
  scale_y_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.5)) +
  stat_summary(fun.y="mean", geom="point", shape=20, size=3, fill="white") +
  ggtitle("Earthquake magnitude mean for each hour 1900-2015(April)")
```

#####Investigate Month with Magnitude Mean/Median
```{r echo=FALSE}
month_group <- ef %>%
  group_by(Month) %>%
  summarize(month_mean = mean(mag),
            month_median = median(mag),
            n = n()) %>%
  arrange(Month)

ggplot(aes(x=Month, y=month_mean), data=month_group) +
  geom_histogram(stat='identity', aes(fill=month_median), color="orange") +
  ggtitle("Month vs Month_mean for earthquake magnitude")

ggplot(aes(x=factor(Month), y=mag), data=ef) +
  geom_boxplot(notch=FALSE) +
  xlab('Month') +
  scale_y_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.5)) +
  stat_summary(fun.y="mean", geom="point", shape=15, size=3, fill="green") +
  ggtitle("Earthquake magnitude mean for each month 1900-2015(April)")
```

####Investigate decade with Magnitude Mean/Median
```{r echo=FALSE}
decade_group <- ef %>%
  group_by(decade) %>%
  summarize(decade_mean = mean(mag),
            decade_median = median(mag),
            n = n()) %>%
  arrange(decade)

ggplot(aes(x=decade, y=decade_mean), data=decade_group) +
  geom_boxplot() +
  ggtitle("Decade vs Decade_mean and Decade_median for earthquake magnitude")

#Focus on the [80<longitude<300,-75<latitude<75] location of the earthquake only
ggplot(aes(y = latitude, x=long), data=subset(ef, long_class='WestH')) +
  geom_point(aes(color=ef$Hour), size=5) +
  geom_point(aes(shape=ef$mag_class), size=3) +
  scale_shape(solid = FALSE) +
  xlab("longitude (degree)") +
  theme(legend.position="bottom") +
  scale_x_continuous(lim=c(180, 360), breaks=seq(180, 360, 15)) +
  scale_y_continuous(lim=c(-70, 75), breaks=seq(-70, 75, 10)) +
  ggtitle("West hemisphere Location vs Hour/Magnitude")

ggplot(aes(y = latitude, x=long), data=subset(ef, long_class='EastH')) +
  geom_point(aes(color=ef$Hour), size=5) +
  geom_point(aes(shape=ef$mag_class), size=3) +
  scale_shape(solid = FALSE) +
  xlab("longitude (degree)") +
  theme(legend.position="bottom") +
  scale_x_continuous(lim=c(0, 180), breaks=seq(0, 180, 15)) +
  scale_y_continuous(lim=c(-70, 75), breaks=seq(-70, 75, 10)) +
  ggtitle("East hemisphere epicenter location vs Hour/Magnitude")

```

## Multivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. Were there features that strengthened each other in terms of looking at your feature(s) of interest?

##### From the bivariate analysis, I already know that most of earthquakes happened around the "Ring of Fire".  here, I separated the latitude and longitude, and I wanted to know if certain latitude or longitude happened more than others.  From the depth of the epicenter, the longitude between 90 and 190, and 260 and 300, there were lots of occurrences of earthquakes.  Among them, longitude between 100 and 180, and 280 and 300 had more deep earthquakes.  When I checked the map of the earth, the longitude is the international dateline, and it is located in the middle of Pacific Ocean.

### Were there any interesting or surprising interactions between features?

#####The distribution of the earthquakes for magnitude class and depth class are similar.  Although most of the earthquakes are either shallow or intermediate, there were a few exceptions with magnitude around 7, but whose depth belong to "deep" class.  It looks like Europe or Africa do not have a lot of large earthquakes (magnitude 7 and higher) compared to Asia and America. The exception that happened a lot and does not belong to the "Ring of Fire" is Afghanistan, and the area that goes through border of Europe.  North hemisphere has more large earthquakes than south hemisphere, and east hemisphere has more than twice that of west hemisphere.

### OPTIONAL: Did you create any models with your dataset? Discuss the strengths and limitations of your model.

-------------------------------------------------------

## Final Plots and Summary

### Plot One
```{r echo=FALSE, Plot_One}
ggplot(aes(y= latitude, x=long), data=ef) +
  geom_point(aes(size=mag_class, color=depth_class)) +
  xlab("Longitude (degree)") +
  ylab("Latitude (degree)") +
  scale_x_continuous(lim=c(0, 360), breaks=seq(0, 360, 20)) +
  scale_y_continuous(lim=c(-70, 75), breaks=seq(-70, 75, 10)) +
  scale_colour_manual(values=Palette1) +
  ggtitle("Global Earthquake Magnitude 7 and above 1900 - 2015 (April)")

```

### Description One

##### It shows most of earquakes around the Ring of Fire.  Most class 1 earthquakes (magnitude > 7.5) are shallow earthquakes.  Also for magnitude >= 7.0 earthquakes, high magnitude earthquakes are less likely to happen.  It is less likely to have magnitude more than 8.0.  It shows that the right side of the "Ring of Fire" has fewer deep eathquakes than the left side of the ring.  And most deep earthquakes are around the ocean area especially on the left side of the ring.  
##### It is less likely to have large earthquakes in Europe or Africa areas.
##### From this graph, we can also tell that the area around the Pacific Ocean has more earthquakes than the Indian or Atlantic Ocean.


### Plot Two
```{r echo=FALSE, Plot_Two}
p1 <- ggplot(aes(x=decade, y=mag), data=ef) +
  geom_boxplot(notch=FALSE) +
  ylab('magnitude') +
  xlab('Decade (year)') +
  scale_y_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.5)) +
  stat_summary(fun.y="mean", geom="point", shape=23, size=3, fill="pink") +
  ggtitle("Earthquake magnitude mean for each decade 1900-2015(April)")

p2 <- ggplot(aes(x=factor(Month), y=mag), data=ef) +
  geom_boxplot(notch=FALSE) +
  ylab('magnitude') +
  xlab('Month') +
  scale_y_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.5)) +
  stat_summary(fun.y="mean", geom="point", shape=23, size=3, fill="green") +
  ggtitle("Earthquake magnitude mean for each month 1900-2015(April)")

p3 <- ggplot(aes(x=factor(Hour), y=mag), data=ef) +
  geom_boxplot(notch=FALSE) +
  ylab('magnitude') +
  xlab('Hour') +
  scale_y_continuous(lim=c(7, 10), breaks=seq(7, 10, 0.5)) +
  stat_summary(fun.y="mean", geom="point", shape=23, size=3, fill="brown") +
  ggtitle("Earthquake magnitude mean for each hour 1900-2015(April)")

grid.arrange(p1, p2, p3, ncol=1)

```

### Description Two

##### These 3 graphs helped me solve the following questions that I had when I started this project for earthquakes of magnitude 7 or higher since 1900:
<ul>
<li>Which decade has the largest earthquake? - 1960s (9.6) </li>
<li>Which decade has the most earthquake? - 1990s (155)   </li>
<li>Which decade has the highest median earthquake? - 1900 (7.70) </li>
<li>Which decade has the highest mean earthquake? - 1900 (7.70) </li>
<li>Which month has the highest mean earthquake? - December (7.414) </li>
<li>Which month has the highest median earthquake? - September (7.4) </li>
<li>Which month has the most amount of earthquake? - November (129) </li>
<li>Which month has the least amount of earthquake? - September (90) </li>
<li>Which hour has the highest median erthquake? - Hour 23 (7.4)  </li>
<li>Which hour has the highest mean erthquake? - Hour 5 (7.46)  </li>
<li>Which hour has the most amount of earthquake? - Hour 14 (68) </li>
<li>Which hour has the least amount of earthquake? - Hour 23 (42) </li>
</ul>
##### It also showed me how the distribution of all those earthquakes is spread out through the years, months, and hours. Although to determine if it might related to the phase of the moon, we need to know the local time.  In this dataset, the time is UTC (Coordinated Universal Time), and it does not show any time zone in this dataset.

### Plot Three
```{r echo=FALSE, Plot_Three}
gA <- ggpairs(ef[, c(2, 25, 4, 5,19,20,22)], 
              title="World Comparison",
              params = c(binwidth=0.1), 
              alpha=1/5, 
              color=ef$mag)
gA

```

### Description Three

<ol>
<li> When looking at the correlation values, it seems none of the fields are related to each other since the correlation values are almost 0. </li> 
<li> When I look at the (latitude, long) graph, it looks like the ring of fire in its reverse side way, which is similar to plot 1 that shows most of the earthquakes area. </li>
<li> When I look at (long, depth) and (long, mag) graphs, it looks like I can put the curve line on top of those 2 graphs and shows a few outliers on longitude is 200 and depth is more than 400.  It also shows that a lot of magnitude between 7 and 8 earthquakes happened in the longitude between the 100 to 200 degree area. </li>
<li> Depth column shows most of earthquakes belong to shallow class, even through out all magnitudes, Years, Months, and Hours. </li>
<li> From the mag (magnitude) column, it shows for the past 100 years, magnitudes between 7 and 8.4 were possible to happen at any hour or month.</li>  
<li> It seems there is no significant correlation among hour, month, and years. </li>
</ol>
----------------------------------------------------------------

# Reflection
#####=======================

<ul> When I started this project, these are some of questions that I want to answer:
<li>Which decades had the largest and most earthquakes since 1900? </li>
<li>Which area had the most amount of earthquakes since 1900? </li>
<li>Is there any relation between magnitude and depth of the epicenter? </li>
<li>Which month has the most amount of earthquakes since 1900?  (Maybe it related to the gravity of Moon and Sun?) </li>
<li>Possible the relationship between magType and magnitude? </li>
I wasn't even know if I can draw any conclusion at all.  Because people cannot really control when and where earthquake to happen, also it is hard to tell that if there is a large earthquake in Japen, and few days later, there is aother large earthquake in China or in the Java Sea.  We cannot really conclude those are somewhat indirectly related to each other.
</ul>

#### Where did I run into difficulties in the analysis?

##### There were many difficulties for this project (before, during and after):
<ul>
<li>Before I started this project, I wasn't sure what kind of project I would do.  It took me over a week to decide and search for a dataset.</li>
<li>When I decided to do this project, I was just interested in the area of earthquakes, and how many large earthquakes has happened so far.  I never really thought that I would be able to draw any conclusions from the dataset. I also wasn't sure:
<ol>
<li>how large is considered a large earthquakes.</li> 
<li>what is the year range I should consider.</li> 
<li> what kinds of questions I should find out</li> 
<li> Will I be able to find out the answeres that I want to find.</li>
</ol>
After finding the dataset, and starting to investigate the data, I was going back and forth if I should change the data selection, such as changing the range of the magnitude, the range of the event.</li>
<li>There are only few numerical fields and few categorical fields that are able to do the analysis.  Many fields that I created were after some struggles and not sure how I should do, than I created to help me to view on many occassions. </li>
<li>Because each earthquake is independent from each other (unless there is a field of data shows it was aftershock of the major one), it is really difficult to create some graphs, such as line or bar graphs.  It seems scatter plot was the best choice.  Also it is a discrete event for all the data, so it just does not make sense to find the average, mean, or quartiles. </li>
<li>After creating so many graphs, I wasn't sure what kind of analysis or conclusion I can make out of these.  Basic data information were created by USGS, I can't really change some of the information. Some fields looked interesting and I thought I might be able to use them to run analysis out of it, but it turned out many data for those variables have no information. </li>
<li>There is lots of repeated code because I want to make sure when I compared each group, they have same basic template to compare though using different variables.</li>
<li>I cannot really conclude or make positive analysis that my analysis will be correct for future earthquakes prediction.  Because each fault line, or the reasons that cause earthquakes, are unknown, in this dataset, the Earth has a mind of its own. </li>
</ul>

#### Where did I find successes?

##### The first success that I found was when I created the plot 1 graph that is similar to the one USGS created, which it also helped me solve many of the difficulties/struggles that I had when I worked on this project.  Although I do not include the map, plate bouundaries, and active volcanoes locations, I feel I did the best as I can.  It proves that most of the earthquakes happen around "the Ring of Fire".  
##### Through out this project, it helped me understand more about how to create different graphs using ggplot. Some of graphs in this datasets just not suitable than the other. 
##### When I found out that most of earthquakes are shallow, and are rarely deep earthquakes, that kind of explains to me why many earthquakes cause severe damage/casualties when we hear that the eathquake is magnitude 7 or higher and it is shallow either from the news or other datasets. Also throughout out the years, every year will have at least 1 large earthquake that is magnitude 7 or higher.  
##### And for the past 100+ years, there is no earthquake that is magnitude 7 or higher recording that happened at either Noth Pole or South Pole.

#### How could the analysis be enriched in future work?

##### I got this dataset through USGS website. Unfortunately in this data collection, it does not include some important information for this dataset. If it included:   
<ul>
<li> faultline - then maybe we can conclude or have a better prediction which faultline has a higher probability to have large earthquakes. </li> 
<li> Phase of the Moon - we might be able to determine if it has some kind of relationship with the occurence of earthquakes.</li>  
<li> Location of volcano - it can help to decide if because of volcanic activity that might affect the earthquake/faultline to occur.</li>  
</ul> 
##### USGS probably have all these information, but it probably needs to combine different datasets to have all the information. It would be nice to include in the search form to help future researchers. 